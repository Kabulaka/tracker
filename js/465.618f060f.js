"use strict";(self["webpackChunklog_tracker"]=self["webpackChunklog_tracker"]||[]).push([[465],{465:function(t,e,a){a.d(e,{diagram:function(){return x}});var r=a(6915),n=a(6898),i=a(4069),d=a(6666),o=a(3589),s=a(6216),l=a(929);a(3617),a(5743),a(4747);let p={};const c=20,g=function(t){const e=Object.entries(p).find((e=>e[1].label===t));if(e)return e[0]},h=function(t){t.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),t.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},f=function(t,e,a,r){const f=(0,o.g)().class;p={},o.l.info("Rendering diagram "+t);const u=(0,o.g)().securityLevel;let x;"sandbox"===u&&(x=(0,n.Ys)("#i"+e));const y="sandbox"===u?(0,n.Ys)(x.nodes()[0].contentDocument.body):(0,n.Ys)("body"),m=y.select(`[id='${e}']`);h(m);const b=new d.k({multigraph:!0});b.setGraph({isMultiGraph:!0}),b.setDefaultEdgeLabel((function(){return{}}));const w=r.db.getClasses(),k=Object.keys(w);for(const n of k){const t=w[n],e=s.s.drawClass(m,t,f,r);p[e.id]=e,b.setNode(e.id,e),o.l.info("Org height: "+e.height)}const E=r.db.getRelations();E.forEach((function(t){o.l.info("tjoho"+g(t.id1)+g(t.id2)+JSON.stringify(t)),b.setEdge(g(t.id1),g(t.id2),{relation:t},t.title||"DEFAULT")}));const L=r.db.getNotes();L.forEach((function(t){o.l.debug(`Adding note: ${JSON.stringify(t)}`);const e=s.s.drawNote(m,t,f,r);p[e.id]=e,b.setNode(e.id,e),t.class&&t.class in w&&b.setEdge(t.id,g(t.class),{relation:{id1:t.id,id2:t.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")})),(0,i.bK)(b),b.nodes().forEach((function(t){void 0!==t&&void 0!==b.node(t)&&(o.l.debug("Node "+t+": "+JSON.stringify(b.node(t))),y.select("#"+(r.db.lookUpDomId(t)||t)).attr("transform","translate("+(b.node(t).x-b.node(t).width/2)+","+(b.node(t).y-b.node(t).height/2)+" )"))})),b.edges().forEach((function(t){void 0!==t&&void 0!==b.edge(t)&&(o.l.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(b.edge(t))),s.s.drawEdge(m,b.edge(t),b.edge(t).relation,f,r))}));const v=m.node().getBBox(),T=v.width+2*c,M=v.height+2*c;(0,l.k)(m,M,T,f.useMaxWidth);const N=`${v.x-c} ${v.y-c} ${T} ${M}`;o.l.debug(`viewBox ${N}`),m.attr("viewBox",N)},u={draw:f},x={parser:r.p,db:r.d,renderer:u,styles:r.s,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,r.d.clear()}}},6216:function(t,e,a){a.d(e,{p:function(){return p},s:function(){return x}});var r=a(6898),n=a(929),i=a(3589);let d=0;const o=function(t,e,a,o,s){const l=function(t){switch(t){case s.db.relationType.AGGREGATION:return"aggregation";case s.db.relationType.EXTENSION:return"extension";case s.db.relationType.COMPOSITION:return"composition";case s.db.relationType.DEPENDENCY:return"dependency";case s.db.relationType.LOLLIPOP:return"lollipop"}};e.points=e.points.filter((t=>!Number.isNaN(t.y)));const p=e.points,c=(0,r.jvg)().x((function(t){return t.x})).y((function(t){return t.y})).curve(r.$0Z),g=t.append("path").attr("d",c(p)).attr("id","edge"+d).attr("class","relation");let h,f,u="";o.arrowMarkerAbsolute&&(u=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,u=u.replace(/\(/g,"\\("),u=u.replace(/\)/g,"\\)")),1==a.relation.lineType&&g.attr("class","relation dashed-line"),10==a.relation.lineType&&g.attr("class","relation dotted-line"),"none"!==a.relation.type1&&g.attr("marker-start","url("+u+"#"+l(a.relation.type1)+"Start)"),"none"!==a.relation.type2&&g.attr("marker-end","url("+u+"#"+l(a.relation.type2)+"End)");const x=e.points.length;let y,m,b,w,k=n.u.calcLabelPosition(e.points);if(h=k.x,f=k.y,x%2!==0&&x>1){let t=n.u.calcCardinalityPosition("none"!==a.relation.type1,e.points,e.points[0]),r=n.u.calcCardinalityPosition("none"!==a.relation.type2,e.points,e.points[x-1]);i.l.debug("cardinality_1_point "+JSON.stringify(t)),i.l.debug("cardinality_2_point "+JSON.stringify(r)),y=t.x,m=t.y,b=r.x,w=r.y}if(void 0!==a.title){const e=t.append("g").attr("class","classLabel"),r=e.append("text").attr("class","label").attr("x",h).attr("y",f).attr("fill","red").attr("text-anchor","middle").text(a.title);window.label=r;const n=r.node().getBBox();e.insert("rect",":first-child").attr("class","box").attr("x",n.x-o.padding/2).attr("y",n.y-o.padding/2).attr("width",n.width+o.padding).attr("height",n.height+o.padding)}if(i.l.info("Rendering relation "+JSON.stringify(a)),void 0!==a.relationTitle1&&"none"!==a.relationTitle1){const e=t.append("g").attr("class","cardinality");e.append("text").attr("class","type1").attr("x",y).attr("y",m).attr("fill","black").attr("font-size","6").text(a.relationTitle1)}if(void 0!==a.relationTitle2&&"none"!==a.relationTitle2){const e=t.append("g").attr("class","cardinality");e.append("text").attr("class","type2").attr("x",b).attr("y",w).attr("fill","black").attr("font-size","6").text(a.relationTitle2)}d++},s=function(t,e,a,r){i.l.debug("Rendering class ",e,a);const n=e.id,d={id:n,label:e.id,width:0,height:0},o=t.append("g").attr("id",r.db.lookUpDomId(n)).attr("class","classGroup");let s;s=e.link?o.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget).append("text").attr("y",a.textHeight+a.padding).attr("x",0):o.append("text").attr("y",a.textHeight+a.padding).attr("x",0);let l=!0;e.annotations.forEach((function(t){const e=s.append("tspan").text("«"+t+"»");l||e.attr("dy",a.textHeight),l=!1}));let p=e.id;void 0!==e.type&&""!==e.type&&(p+="<"+e.type+">");const c=s.append("tspan").text(p).attr("class","title");l||c.attr("dy",a.textHeight);const g=s.node().getBBox().height,h=o.append("line").attr("x1",0).attr("y1",a.padding+g+a.dividerMargin/2).attr("y2",a.padding+g+a.dividerMargin/2),u=o.append("text").attr("x",a.padding).attr("y",g+a.dividerMargin+a.textHeight).attr("fill","white").attr("class","classText");l=!0,e.members.forEach((function(t){f(u,t,l,a),l=!1}));const x=u.node().getBBox(),y=o.append("line").attr("x1",0).attr("y1",a.padding+g+a.dividerMargin+x.height).attr("y2",a.padding+g+a.dividerMargin+x.height),m=o.append("text").attr("x",a.padding).attr("y",g+2*a.dividerMargin+x.height+a.textHeight).attr("fill","white").attr("class","classText");l=!0,e.methods.forEach((function(t){f(m,t,l,a),l=!1}));const b=o.node().getBBox();var w=" ";e.cssClasses.length>0&&(w+=e.cssClasses.join(" "));const k=o.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",b.width+2*a.padding).attr("height",b.height+a.padding+.5*a.dividerMargin).attr("class",w),E=k.node().getBBox().width;return s.node().childNodes.forEach((function(t){t.setAttribute("x",(E-t.getBBox().width)/2)})),e.tooltip&&s.insert("title").text(e.tooltip),h.attr("x2",E),y.attr("x2",E),d.width=E,d.height=b.height+a.padding+.5*a.dividerMargin,d},l=function(t,e,a,r){i.l.debug("Rendering note ",e,a);const n=e.id,d={id:n,text:e.text,width:0,height:0},o=t.append("g").attr("id",n).attr("class","classGroup");let s=o.append("text").attr("y",a.textHeight+a.padding).attr("x",0);const l=JSON.parse(`"${e.text}"`).split("\n");l.forEach((function(t){i.l.debug(`Adding line: ${t}`),s.append("tspan").text(t).attr("class","title").attr("dy",a.textHeight)}));const p=o.node().getBBox(),c=o.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",p.width+2*a.padding).attr("height",p.height+l.length*a.textHeight+a.padding+.5*a.dividerMargin),g=c.node().getBBox().width;return s.node().childNodes.forEach((function(t){t.setAttribute("x",(g-t.getBBox().width)/2)})),d.width=g,d.height=p.height+l.length*a.textHeight+a.padding+.5*a.dividerMargin,d},p=function(t){const e=/^([#+~-])?(\w+)(~\w+~|\[])?\s+(\w+) *([$*])?$/,a=/^([#+|~-])?(\w+) *\( *(.*)\) *([$*])? *(\w*[[\]|~]*\s*\w*~?)$/;let r=t.match(e),n=t.match(a);return r&&!n?c(r):n?g(n):h(t)},c=function(t){let e="",a="";try{let r=t[1]?t[1].trim():"",n=t[2]?t[2].trim():"",d=t[3]?(0,i.z)(t[3].trim()):"",o=t[4]?t[4].trim():"",s=t[5]?t[5].trim():"";a=r+n+d+" "+o,e=u(s)}catch(r){a=t}return{displayText:a,cssStyle:e}},g=function(t){let e="",a="";try{let r=t[1]?t[1].trim():"",n=t[2]?t[2].trim():"",d=t[3]?(0,i.z)(t[3].trim()):"",o=t[4]?t[4].trim():"",s=t[5]?" : "+(0,i.z)(t[5]).trim():"";a=r+n+"("+d+")"+s,e=u(o)}catch(r){a=t}return{displayText:a,cssStyle:e}},h=function(t){let e="",a="",r="",n=t.indexOf("("),d=t.indexOf(")");if(n>1&&d>n&&d<=t.length){let o="",s="",l=t.substring(0,1);l.match(/\w/)?s=t.substring(0,n).trim():(l.match(/[#+~-]/)&&(o=l),s=t.substring(1,n).trim());const p=t.substring(n+1,d);t.substring(d+1,1),a=u(t.substring(d+1,d+2)),e=o+s+"("+(0,i.z)(p.trim())+")",d<t.length&&(r=t.substring(d+2).trim(),""!==r&&(r=" : "+(0,i.z)(r),e+=r))}else e=(0,i.z)(t);return{displayText:e,cssStyle:a}},f=function(t,e,a,r){let n=p(e);const i=t.append("tspan").attr("x",r.padding).text(n.displayText);""!==n.cssStyle&&i.attr("style",n.cssStyle),a||i.attr("dy",r.textHeight)},u=function(t){switch(t){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},x={drawClass:s,drawEdge:o,drawNote:l,parseMember:p}}}]);
//# sourceMappingURL=465.618f060f.js.map